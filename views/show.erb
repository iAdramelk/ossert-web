<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="layout">
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
            <symbol id="icon_type_search" viewBox="0 0 24 24">
                <path d="M24,22.9l-6.7-6.7c1.5-1.7,2.4-3.9,2.4-6.4c0-5.4-4.4-9.8-9.8-9.8S0,4.4,0,9.8s4.4,9.8,9.8,9.8c2.4,0,4.7-0.9,6.4-2.4l6.7,6.7L24,22.9z M9.8,18.2c-4.6,0-8.4-3.8-8.4-8.4s3.8-8.4,8.4-8.4s8.4,3.8,8.4,8.4S14.4,18.2,9.8,18.2z"/>
            </symbol>
            <symbol id="icon_type_info" viewBox="0 0 34 34">
                <path d="M17,33.9C7.7,33.9,0.1,26.3,0.1,17S7.7,0.1,17,0.1S33.9,7.7,33.9,17S26.3,33.9,17,33.9L17,33.9zM17,1.9C8.7,1.9,1.9,8.7,1.9,17S8.7,32.1,17,32.1S32.1,25.3,32.1,17S25.3,1.9,17,1.9L17,1.9z"/>
                <path d="M11.8,11.6c0.3-0.8,0.6-1.4,1.2-1.9c0.5-0.5,1.1-0.9,1.9-1.2C15.5,8.2,16.4,8,17.3,8c0.7,0,1.4,0.1,2,0.3s1.2,0.5,1.7,0.9c0.5,0.4,0.9,0.9,1.1,1.5c0.3,0.6,0.4,1.3,0.4,2c0,1-0.2,1.8-0.6,2.5c-0.4,0.7-1,1.3-1.6,1.9c-0.5,0.5-1,1-1.3,1.3c-0.3,0.3-0.6,0.6-0.7,0.9s-0.3,0.7-0.3,1.1c-0.1,0.4-0.1,0.7-0.1,1.5h-1.6c0-0.8,0-1.1,0.1-1.7c0.1-0.5,0.3-1,0.5-1.5c0.2-0.4,0.5-0.8,0.9-1.2c0.4-0.4,0.9-0.8,1.4-1.4c0.5-0.4,0.9-1,1.2-1.5c0.3-0.6,0.5-1.2,0.5-1.8c0-0.5-0.1-1-0.3-1.4c-0.2-0.4-0.5-0.8-0.8-1.1c-0.3-0.3-0.7-0.5-1.2-0.7c-0.5-0.2-0.9-0.3-1.4-0.3c-0.7,0-1.3,0.1-1.8,0.4c-0.5,0.2-1,0.6-1.3,1c-0.3,0.4-0.6,0.9-0.8,1.5c-0.2,0.6-0.3,1-0.2,1.7h-1.6C11.4,13.1,11.5,12.4,11.8,11.6L11.8,11.6z M16,24h2v2h-2V24z"/>
            </symbol>
            <symbol id="icon_type_mark-a" viewBox="0 0 72 72">
                <circle style="fill: currentColor;" cx="36" cy="36" r="36"/>
                <path style="fill: #ffffff;" d="M32.4,16.3h7.2l14.8,38.6h-7.2l-3.6-10.2H28.2l-3.6,10.2h-7L32.4,16.3z M30,39.5h11.8L36,22.9h-0.2L30,39.5z"/>
            </symbol>
            <symbol id="icon_type_mark-b" viewBox="0 0 72 72">
                <circle style="fill: currentColor;" cx="36" cy="36" r="36"/>
                <path style="fill: #ffffff;" d="M28,32.4h11c1.6,0,3-0.5,4-1.4c1.1-0.9,1.6-2.2,1.6-4c0-1.9-0.5-3.3-1.5-4.1c-1-0.8-2.4-1.2-4.2-1.2H28V32.4z M21.3,16.3H40c3.5,0,6.2,0.8,8.3,2.4c2.1,1.6,3.1,4,3.1,7.2c0,1.9-0.5,3.6-1.4,5c-1,1.4-2.3,2.5-4.1,3.2v0.1c2.4,0.5,4.2,1.6,5.4,3.4c1.2,1.7,1.8,3.9,1.8,6.6c0,1.5-0.3,2.9-0.8,4.2c-0.5,1.3-1.4,2.4-2.5,3.4c-1.2,1-2.6,1.7-4.4,2.3c-1.8,0.6-3.9,0.8-6.4,0.8H21.3V16.3z M28,49.3H40c2.1,0,3.6-0.5,4.8-1.6s1.7-2.6,1.7-4.5c0-1.9-0.6-3.4-1.7-4.4S42,37.3,40,37.3H28V49.3z"/>
            </symbol>
            <symbol id="icon_type_mark-c" viewBox="0 0 72 72">
                <circle style="fill: currentColor;" cx="36" cy="36" r="36"/>
                <path style="fill: #ffffff;" d="M46.5,28.5c-0.3-1.1-0.7-2.1-1.2-3.1c-0.5-0.9-1.2-1.7-1.9-2.4c-0.8-0.7-1.7-1.2-2.8-1.6c-1.1-0.4-2.3-0.6-3.7-0.6c-2.1,0-3.8,0.4-5.3,1.2c-1.5,0.8-2.7,1.9-3.6,3.3c-0.9,1.4-1.6,3-2.1,4.7c-0.5,1.8-0.7,3.6-0.7,5.4c0,1.8,0.2,3.6,0.7,5.4c0.5,1.8,1.1,3.3,2.1,4.7c0.9,1.4,2.2,2.5,3.6,3.3c1.5,0.8,3.3,1.2,5.3,1.2c1.5,0,2.8-0.3,4-0.8c1.2-0.5,2.1-1.2,3-2.2c0.8-0.9,1.5-2,1.9-3.2s0.8-2.5,0.9-3.9h6.6c-0.1,2.3-0.6,4.4-1.5,6.3c-0.8,1.9-2,3.6-3.4,4.9c-1.4,1.4-3.1,2.5-5.1,3.2c-1.9,0.8-4.1,1.1-6.4,1.1c-2.9,0-5.5-0.5-7.7-1.6c-2.3-1.1-4.2-2.5-5.8-4.3c-1.6-1.8-2.8-4-3.6-6.4c-0.8-2.4-1.3-5.1-1.3-7.8c0-2.7,0.4-5.3,1.3-7.8c0.8-2.4,2.1-4.6,3.6-6.4c1.6-1.8,3.5-3.3,5.8-4.4s4.9-1.6,7.7-1.6c2.2,0,4.2,0.3,6.1,0.9c1.9,0.6,3.6,1.5,5,2.6c1.5,1.1,2.6,2.5,3.5,4.1c0.9,1.6,1.5,3.5,1.7,5.6H46.5z"/>
            </symbol>
            <symbol id="icon_type_mark-d" viewBox="0 0 72 72">
                <circle style="fill: currentColor;" cx="36" cy="36" r="36"/>
                <path style="fill: #ffffff;" d="M21.3,16.3h16c3,0,5.5,0.5,7.7,1.5c2.2,1,3.9,2.4,5.3,4.1s2.4,3.8,3.1,6.1c0.7,2.3,1,4.8,1,7.5s-0.3,5.2-1,7.5c-0.7,2.3-1.7,4.4-3.1,6.1s-3.1,3.1-5.3,4.1c-2.2,1-4.7,1.5-7.7,1.5h-16V16.3z M28,49.3h6.6c2.6,0,4.8-0.4,6.5-1.1c1.7-0.7,3-1.7,3.9-2.9c1-1.2,1.6-2.7,1.9-4.4c0.3-1.7,0.5-3.5,0.5-5.4c0-1.9-0.2-3.8-0.5-5.4s-1-3.1-1.9-4.4c-1-1.2-2.3-2.2-3.9-2.9c-1.7-0.7-3.8-1.1-6.5-1.1H28V49.3z"/>
            </symbol>
            <symbol id="icon_type_mark-e" viewBox="0 0 72 72">
                <circle style="fill: currentColor;" cx="36" cy="36" r="36"/>
                <polygon style="fill: #ffffff;" points="22.1,16.3 49.9,16.3 49.9,22.1 28.9,22.1 28.9,32.2 48.3,32.2 48.3,37.7 28.9,37.7 28.9,49 50.2,49 50.2,54.8 22.1,54.8"/>
            </symbol>
            <symbol id="icon_type_to-top" viewBox="0 0 24 24">
                <path d="M3.984 12l8.016-8.016 8.016 8.016-1.453 1.406-5.578-5.578v12.188h-1.969v-12.188l-5.625 5.578z" />
            </symbol>
        </defs>
    </svg>
    <header class="header" id="header">
        <div class="width-container header__content">
            <a href="/" class="logo header__logo">Ossert.</a>
            <span class="header__description">Open-Source Maturity & Maintenance Certification</span>
            <form action="#" class="header__search search">
                <input type="text" class="search__input" placeholder="Type package name..." name="package">
                <button class="search__submit">
                    <svg class="icon search__submit-icon">
                        <use xlink:href="#icon_type_search"></use>
                    </svg>
                </button>
            </form>
        </div>
    </header>
    <main class="layout__content width-container">
        <header class="layout__content-row">
            <div class="layout__content-section">
                <div class="gem">
                    <div class="gem-header" id="sticky-project-header">
                      <h1 class="gem-header__heading"><%= @project.name %></h1>
                        <div class="gem-header__fixed gem-header__fixed_hidden">
                            <div class="gem-header__fixed-container width-container">
                                <h1 class="gem-header__fixed-heading"><%= @project.name %></h1>
                                <ul class="gem-header__fixed-items">
                                    <li class="gem-header__fixed-item">
                                        <a href="#popularity" class="gem-header__fixed-item-link link">Popularity</a>
                                    </li>
                                    <li class="gem-header__fixed-item">
                                        <a href="#maintenance" class="gem-header__fixed-item-link link">Maintenance</a>
                                    </li>
                                    <li class="gem-header__fixed-item">
                                        <a href="#maturity" class="gem-header__fixed-item-link link">Maturity</a>
                                    </li>
                                </ul>
                                <a href="#header" class="gem-header__top-link">
                                    <svg class="icon gem-header__top-link-icon">
                                        <use xlink:href="#icon_type_to-top"></use>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                    <p class="gem__description">
                        <%= @project.meta["description"] %>
                    </p>
                    <div class="gem__links">
                      <a class="gem__link link" href="<%= @project.meta["homepage_url"] %>" rel="nofollow" target="_blank">Website</a>
                        <a class="gem__link link" href="<%= @project.meta["docs_url"] %>" rel="nofollow" target="_blank">RDoc</a>
                        <a class="gem__link link" href="<%= @project.meta["wiki_url"] %>" rel="nofollow" target="_blank">Wiki</a>
                        <a class="gem__link link" href="<%= @project.meta["source_url"] %>" rel="nofollow" target="_blank">Source Code</a>
                        <a class="gem__link link" href="<%= @project.meta["issue_tracker_url"] %>" rel="nofollow" target="_blank">Bug Tracker</a>
                    </div>
                    <div class="gem__links">
                        <a class="gem__link link" href="/suggest/<%= @project.name %>" rel="nofollow" target="_blank">&#8635; Request Update</a>
                    </div>
                </div>
            </div>
            <aside class="layout__sidebar-section">
                <ul class="gem-main-stats">
                    <li class="gem-main-stats__item">
                        <a href="#popularity" class="gem-main-stats__item-link">
                            <svg class="icon icon_type_mark-<%= @analysis_gr[:popularity].downcase %> gem-main-stats__item-mark">
                                <use xlink:href="#icon_type_mark-<%= @analysis_gr[:popularity].downcase %>"></use>
                            </svg>
                            Popularity
                        </a>
                    </li>
                    <li class="gem-main-stats__item">
                        <a href="#maintenance" class="gem-main-stats__item-link">
                            <svg class="icon icon_type_mark-<%= @analysis_gr[:maintenance].downcase %> gem-main-stats__item-mark">
                                <use xlink:href="#icon_type_mark-<%= @analysis_gr[:maintenance].downcase %>"></use>
                            </svg>
                            Maintenance
                        </a>
                    </li>
                    <li class="gem-main-stats__item">
                        <a href="#maturity" class="gem-main-stats__item-link">
                            <svg class="icon icon_type_mark-<%= @analysis_gr[:maturity].downcase %> gem-main-stats__item-mark">
                                <use xlink:href="#icon_type_mark-<%= @analysis_gr[:maturity].downcase %>"></use>
                            </svg>
                            Maturity
                        </a>
                    </li>
                </ul>
            </aside>
        </header>
        <div class="layout__content-row">
            <div class="layout__content-section layout__stats-tables">
                <section class="gem-stats" id="popularity">
                    <header class="gem-stats__header-container">
                        <h3 class="gem-stats__header">Popularity</h3>
                        <div
                            class="gem-stats__chart gem-stats-chart"
                            data-columns='<%=@project.decorated.fast_preview_graph_data[:popularity].to_json%>'
                        ></div>
                        <svg class="icon icon_type_mark-<%= @analysis_gr[:popularity].downcase %> gem-stats__mark">
                          <use xlink:href="#icon_type_mark-<%= @analysis_gr[:popularity].downcase %>"></use>
                        </svg>
                    </header>
                    <p class="gem-stats__description">
                        Popularity is metric calculated from user activity for the last year and total from all time. This way we can see if projects popularity rises or is already in decline.
                    </p>
                    <table class="gems-stats-table gem-stats__table">
                        <thead class="gems-stats-table__header">
                            <tr class="gems-stats-table__header-row">
                                <th class="gems-stats-table__header-cell">Metric</th>
                                <th class="gems-stats-table__header-cell gems-stats-table__header-cell_values-column gems-stats-table__header-cell_values-column-penultimate">This year</th>
                                <th class="gems-stats-table__header-cell gems-stats-table__header-cell_values-column">Total</th>
                            </tr>
                        </thead>
                        <tbody class="gems-stats-table__body">
                          <% @popularity_metrics.each do |metric| %>
                            <tr
                                class="gems-stats-table__row"
                                data-tooltip='<%= JSON.generate @project.decorated.tooltip_data(metric) %>'
                            >
                                <td class="gems-stats-table__cell gems-stats-table__cell_title">
                                    <%= Ossert.t(metric) %>
                                    <svg class="icon gems-stats-table__info-icon">
                                        <use xlink:href="#icon_type_info"></use>
                                    </svg>
                                </td>
                                <td class="gems-stats-table__cell gems-stats-table__cell_values-column gems-stats-table__cell_values-column-penultimate">
                                  <% value = @project.decorated.community_last_year[metric] %>
                                  <span class="mark-text mark-text_<%= value.try(:[], :mark) %>"> <%= value.try(:[], :text) || 'N/A' %></span>
                                </td>
                                <td class="gems-stats-table__cell gems-stats-table__cell_values-column">
                                  <% value = @project.decorated.community_total[metric] %>
                                    <span class="mark-text mark-text_<%= value.try(:[], :mark) %>"><%= value.try(:[], :text) || 'N/A' %></span>
                                </td>
                            </tr>
                          <% end %>
                        </tbody>
                    </table>
                </section>

                <section class="gem-stats" id="maintenance">
                    <header class="gem-stats__header-container">
                        <h3 class="gem-stats__header">Maintenance</h3>
                        <div
                            class="gem-stats__chart gem-stats-chart"
                            data-columns='<%=@project.decorated.fast_preview_graph_data[:maintenance].to_json%>'
                        ></div>
                        <svg class="icon icon_type_mark-<%= @analysis_gr[:maintenance].downcase %> gem-stats__mark">
                            <use xlink:href="#icon_type_mark-<%= @analysis_gr[:maintenance].downcase %>"></use>
                        </svg>
                    </header>
                    <p class="gem-stats__description">
                        Maintenance is metric calculated from project activity for the last year and total from all time. This way we can see if project's developments is dynamic and core team is responsice or project is unstable and non-trusted.
                    </p>
                    <table class="gems-stats-table gem-stats__table">
                        <thead class="gems-stats-table__header">
                        <tr class="gems-stats-table__header-row">
                            <th class="gems-stats-table__header-cell">Metric</th>
                            <th class="gems-stats-table__header-cell gems-stats-table__header-cell_values-column">Total</th>
                        </tr>
                        </thead>
                        <tbody class="gems-stats-table__body">
                          <% @maintenance_metrics.each do |metric|  %>
                            <tr
                                class="gems-stats-table__row"
                                data-tooltip='<%= JSON.generate @project.decorated.tooltip_data(metric) %>'
                            >
                                <td class="gems-stats-table__cell gems-stats-table__cell_title">
                                    <%= Ossert.t(metric) %>
                                    <svg class="icon gems-stats-table__info-icon">
                                        <use xlink:href="#icon_type_info"></use>
                                    </svg>
                                </td>
                                  <% value = @project.decorated.agility_last_year[metric] %>

                                <td class="gems-stats-table__cell gems-stats-table__cell_values-column gems-stats-table__cell_values-column-penultimate">
                                  <span class="mark-text mark-text_<%= value.try :[], :mark %>"> <%= value.try(:[], :text) || 'N/A' %></span>
                                </td>
                                  <% value = @project.decorated.agility_total[metric] %>
                                <td class="gems-stats-table__cell gems-stats-table__cell_values-column">
                                    <span class="mark-text mark-text_<%= value.try :[], :mark %>"><%= value.try(:[], :text) || 'N/A' %></span>
                                </td>
                            </tr>
                          <% end %>
                        </tbody>
                    </table>
                </section>

                <section class="gem-stats" id="maturity">
                    <header class="gem-stats__header-container">
                        <h3 class="gem-stats__header">Maturity</h3>
                        <div
                            class="gem-stats__chart gem-stats-chart"
                            data-columns='<%=@project.decorated.fast_preview_graph_data[:maturity].to_json%>'
                        ></div>
                        <svg class="icon icon_type_mark-<%= @analysis_gr[:maturity].downcase %> gem-stats__mark">
                          <use xlink:href="#icon_type_mark-<%= @analysis_gr[:maturity].downcase %>"></use>
                        </svg>
                    </header>
                    <p class="gem-stats__description">
                        Maturity is metric calculated from both project and users activity for the last year and total from all time. This way we can see if project reached high growth level or just on its seedling stage.
                    </p>
                    <table class="gems-stats-table gem-stats__table">
                        <thead class="gems-stats-table__header">
                        <tr class="gems-stats-table__header-row">
                            <th class="gems-stats-table__header-cell">Metric</th>
                            <th class="gems-stats-table__header-cell gems-stats-table__header-cell_values-column gems-stats-table__header-cell_values-column-penultimate">This year</th>
                            <th class="gems-stats-table__header-cell gems-stats-table__header-cell_values-column">Total</th>
                        </tr>
                        </thead>
                        <tbody class="gems-stats-table__body">

                          <% @maturity_metrics.each do |metric|  %>
                            <% section = Ossert::Stats.guess_section_by_metric(metric) %>
                            <% next if section.to_s =~ /not_found/ %>
                            <tr
                                class="gems-stats-table__row"
                                data-tooltip='<%= JSON.generate @project.decorated.tooltip_data(metric) %>'
                            >
                                <td class="gems-stats-table__cell gems-stats-table__cell_title">
                                    <%= Ossert.t(metric) %>
                                    <svg class="icon gems-stats-table__info-icon">
                                        <use xlink:href="#icon_type_info"></use>
                                    </svg>
                                </td>
                                <% section_last_year = @project.decorated.send("#{section}_last_year")[metric] %>
                                <% section_total = @project.decorated.send("#{section}_total")[metric] %>

                                <td class="gems-stats-table__cell gems-stats-table__cell_values-column gems-stats-table__cell_values-column-penultimate">
                                  <span class="mark-text mark-text_<%= section_last_year.try(:[], :mark) %>"> <%=section_last_year.try(:[], :text) || 'N/A' %></span>
                                </td>
                                <td class="gems-stats-table__cell gems-stats-table__cell_values-column">
                                    <span class="mark-text mark-text_<%= section_total.try(:[], :mark) %>"><%= section_total.try(:[], :text) || 'N/A' %></span>
                                </td>
                            </tr>
                          <% end %>
                        </tbody>
                    </table>
                </section>
            </div>
            <aside class="layout__sidebar-section layout__tooltip-sidebar">
                <div class="help-tooltip help-tooltip_hidden">
                    <div class="help-tooltip__arrow"></div>
                    <div class="help-tooltip__content"></div>
                </div>
            </aside>
        </div>
    </main>
    <footer class="footer">
        &copy; Copyright 2001-2016 Sergey Dolganov
    </footer>
    <script src="/js/main.js"></script>
</body>
</html>
